第五章 总体设计

------

## 模块独立化

### 重要性

- 有效的模块化的软件比较容易开发出来
- 独立的模块比较容易测试和维护

### 耦合

#### 定义

指软件结构内不同模块彼此之间相互依赖（连接）的紧密程度

#### 分类

1. **数据耦合**：两个模块之间只是通过参数交换信息，而且交换的只是数据，数据耦合是最低程度的耦合
2. **控制耦合**：两个模块之间所交换的信息包括控制信息，控制耦合是中等程度的耦合
3. **公用耦合**：两个或多个模块通过一个公共区相互作用时的耦合
4. **内容耦合**：一个模块与另一个模块的内容直接发生联系，内容耦合对维护带来严重的困难

软件设计应该追求尽可能的松耦合，避免强耦合，增强模块之间的独立性，因此建议：**尽量使用数据耦合，少用控制耦合，限制公共耦合，避免内容耦合**

### 内聚

#### 定义

一个模块内部各个元素彼此结合的紧密程度

#### 分类

1. **功能内聚**：如果一个模块内所有处理元素完成一个，而且仅完成一个功能，则称为功能内聚
2. **顺序内聚**：如果一个模块内处理元素和同一个功能紧密相关，而且这些处理元素必须顺序执行，则称为顺序内聚
3. **通信内聚**：如果一个模块内所有处理元素都使用同一个输入数据和（或）产生同一个输出数据，称为通信内聚
4. **过程内聚**：如果一个模块内的处理元素是相关的，而且必须一特定的次序执行，则称为过程内聚，与顺序内聚的区别是：顺序内聚中是数据流从一个处理单元流到另一个处理单元，而过程内聚是控制流从一个动作流向另一个动作
5. **时间内聚**：如果一个模块包含的任务必须在同一个时段内执行，称为时间内聚，也称为瞬时内聚
6. **逻辑内聚**：如果模块完成的任务在逻辑上属于相同的或相似的一类，称为逻辑内聚
7. **偶然内聚**：如果一个模块由完成若干毫无关系的功能处理元素偶然组合在一起的，叫做偶然内聚

软件设计中应当做到：**力求做到高内聚，尽量少用中内聚，不用低内聚**

## 启发式规则

1. 改进软件结构提高模块独立性
2. 模块规模应当适中
3. 深度，宽度，扇出和扇入应该适当
4. 模块的作用域应该在控制域之内
5. 力争降低模块接口的复杂度
6. 设计单入口，单出口的模块
7. 模块功能应当可以预测

## 面向数据流的设计方法

面向数据流设计是与数据流分析对应的结构化软件设计技术，面向数据流的设计将得到以数据流图为基础的软件模块结构图

数据流可以分为两类：

1. **变换型**数据流：具有较明确的输入，变换和输出界面的数据流图
2. **事务型**数据流：存在一个事务中心，它将输入分离成若干个发散的数据流，形成许多活动路径，并根据输入选择路径